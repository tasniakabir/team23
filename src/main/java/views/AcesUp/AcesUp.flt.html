<h1 id="title">Aces Up</h1>

<link href="/assets/css/AcesUp.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">
<link href="http://fonts.googleapis.com/css?family=Josefin+Sans:700|Amatic+SC:700" rel="stylesheet" type="text/css" />
<link href="http://fonts.googleapis.com/css?family=Abel|Medula+One" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/assets/webjars/jquery/2.1.3/jquery.js"></script>

<body id="stylebody">
<div id="background"></div>

<div id="myModal" class="modal fade in">
    <div class="modal-dialog"><
        <div class="modal-content">
            <p>Please choose a deck to play with: </p>
            <button type="button" class="btn btn-default" data-dismiss="modal" id="spanish">Spanish Deck</button>
            <button type="button" class="btn btn-default" data-dismiss="modal" id="standard">Standard Deck</button>
        </div>
    </div>
</div>

<div class="modal-backdrop fade in">
<div class="sideBar">
    <button class= "deck" id="dealButton">Deal</button>
    <div class="howToPlay" id="superiorityRulz">
    <p>Rules:</p>
    <ol class="ruleList">
        <li>Four cards are dealt in a row face up</li>
        <li>If there are two or more cards of the same suit, discard all but the highest ranked card of that suit</li>
        <li>Repeat step 2 until there are no more pairs of cards with the same suit</li>
        <li>Whenever there is an empty space, you may move an Ace (and only an Ace) from the top a pile into the empty space. After this, go to step 2</li>
        <li>When there are nom more cards to move or remove, deal our the next four cards from the deck to each pile</li>
        <li>Repeat step 2 using only the "top" cards of each of the four piles</li>
        <li>When the last four cards have been dealt and any possible moves made, the game is over. The fewer cards left on the tableau, the better. To win is to have only the four aces left</li>
    </ol>
    <p>Instructions:</p>
    <ul class="instructionList">
        <li>Deal four: click on deal button</li>
        <li>Remove a card: click remove button below column of cards containing card to be removed</li>
        <li>Move a card to a blank space: use drop down menus to specify which column the card is coming from and the empty column it is being moved to. Columns are numbered 1-4 from left to right</li>
    </ul>
    </div>
</div>

<div class="tableau">
<table id="cards">
    <!--<tr class="title">
        <th>Column 1</th>
        <th>Column 2</th>
        <th>Column 3</th>
        <th>Column 4</th>
    </tr>-->

    <tr><td class="columnOfCards" id="c0">
        <table>
            <tr><td class="cardLocation l0"></td></tr>
            <tr><td class="cardLocation l1"></td></tr>
            <tr><td class="cardLocation l2"></td></tr>
            <tr><td class="cardLocation l3"></td></tr>
            <tr><td class="cardLocation l4"></td></tr>
            <tr><td class="cardLocation l5"></td></tr>
            <tr><td class="cardLocation l6"></td></tr>
            <tr><td class="cardLocation l7"></td></tr>
            <tr><td class="cardLocation l8"></td></tr>
            <tr><td class="cardLocation l9"></td></tr>
            <tr><td class="cardLocation l10"></td></tr>
            <tr><td class="cardLocation l11"></td></tr>
            <tr><td class="cardLocation l12"></td></tr>
            <tr><td class="cardLocation l13"></td></tr>
            <tr><td><button id="Remove1">Remove</button></td></tr>
        </table>
    </td>
        <td class="columnOfCards" id="c1">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
                <tr><td><button id="Remove2">Remove</button></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c2">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
                <tr><td><button id="Remove3">Remove</button></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c3">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
                <tr><td><button id="Remove4">Remove</button></td></tr>
            </table>
        </td>
    </tr>
</table>

<!--<button class= "Deck" id="dealButton">Deal</button>-->
<!--<BR>Remove from: <button id="Remove1">Column1</button><button id="Remove2">Column2</button><button id="Remove3">Column3</button><button id="Remove4">Column4</button>-->

    <BR>Move from column
    <select id="from_col">
        <option value="0">Column 0</option>
        <option value="1">Column 1</option>
        <option value="2">Column 2</option>
        <option value="3">Column 3</option>
    </select>
    to
    <select id="to_col">
        <option value="0">Column 0</option>
        <option value="1">Column 1</option>
        <option value="2">Column 2</option>
        <option value="3">Column 3</option>
    </select>
    <button id="moveButton">Move</button>
</div>
</div>

<script>

var game;
var h = "Hearts";
var d = "Diamonds";
var s = "Spades";
var c = "Clubs";
var mysuit;
var n = -1;
var myspanish=0;
var mystandard=0;
var spanishgame;
var b = "Bastos";
var o = "Oros";
var e = "Espadas";
var co = "Copas";

var myval;

$(document).ready(function () {
    $('#myModal').fadeIn('slow');
    $("#spanish").on('click', function() {
        $('#myModal').fadeOut('slow');
        myspanish=1;
                function display(spanishgame) {
console.log(spanishgame);

$( '.columnOfCards .cardLocation' ).html("");

    $.each(spanishgame.cols[0].cards, function( key, val ) {
        myval=val.value;

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit=" Bastos";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit=" Oros";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit=" Espadas";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit=" Copas";}

        $( '#c0 .l'+key ).html(myval + mysuit);
    });

 $.each(spanishgame.cols[1].cards, function( key, val ) {
        myval=val.value;

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit=" Bastos";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit=" Oros";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit=" Espadas";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit=" Copas";}

        $( '#c1 .l'+key ).html(myval + mysuit);
    });

 $.each(spanishgame.cols[2].cards, function( key, val ) {
        myval=val.value;

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit=" Bastos";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit=" Oros";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit=" Espadas";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit=" Copas";}

        $( '#c2 .l'+key ).html(myval + mysuit);
    });

 $.each(spanishgame.cols[3].cards, function( key, val ) {
        myval=val.value;

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit=" Bastos";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit=" Oros";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit=" Espadas";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit=" Copas";}

        $( '#c3 .l'+key ).html(myval + mysuit);
    });
}

// Calls ApplicationController.spanishgameGet()
$.getJSON("http://localhost:8080/game", function( data ) {
display(data);
spanishgame = data;
});


$("#dealButton").click(function(){
$.ajax({
  type: "POST",
  url: "/dealGame",
  data: JSON.stringify(spanishgame),
  success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
        spanishgame = data;
        display(data);},
  contentType:"application/json; charset=utf-8",
  dataType:"json",
});
});


function removeCard(colNumber){
$.ajax({
type: "POST",
url: "/removeCard/"+colNumber,
data: JSON.stringify(spanishgame),
success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
    spanishgame = data;


    if(data.error) {
        errorPopup();
    }

    display(data);},
contentType:"application/json; charset=utf-8",
dataType:"json",
});

}


$("#Remove1").click(function(){
    removeCard(0);
});
$("#Remove2").click(function(){
    removeCard(1);
});
$("#Remove3").click(function(){
    removeCard(2);
});
$("#Remove4").click(function(){
    removeCard(3);
});


$("#moveButton").click(function(){
var colFrom = $("#from_col").val();
var colTo = $("#to_col").val();
$.ajax({
  type: "POST",
  url: "/moveCard/"+colFrom+"/"+colTo,
  data: JSON.stringify(spanishgame),
  success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
        spanishgame = data;

        if(data.error) {
            errorPopup();
        }

        display(data);},
  contentType:"application/json; charset=utf-8",
  dataType:"json",
});
});


function errorPopup(){
   alert("Oops! Looks like you can't do that. Please check the rules and try again.");
}
    });


    $("#standard").on('click', function() {
        mystandard=1;
        $('#myModal').fadeOut('slow');
        function display(game) {
console.log(game);

$( '.columnOfCards .cardLocation' ).html("");

    $.each(game.cols[0].cards, function( key, val ) {
        if(val.value==11){ myval="J";}
        else if(val.value==12){ myval="Q";}
        else if(val.value==13){ myval="K";}
        else if(val.value==14){ myval="A";}
        else{ myval=val.value;}

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit="   &hearts;";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit="   &diams;";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit="   &spades;";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit="   &clubs;";}

        $( '#c0 .l'+key ).html(myval + mysuit);
    });

 $.each(game.cols[1].cards, function( key, val ) {
        if(val.value==11){ myval="J";}
        else if(val.value==12){ myval="Q";}
        else if(val.value==13){ myval="K";}
        else if(val.value==14){ myval="A";}
        else{ myval=val.value;}

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit="   &hearts;";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit="   &diams;";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit="   &spades;";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit="   &clubs;";}

        $( '#c1 .l'+key ).html(myval + mysuit);
    });

 $.each(game.cols[2].cards, function( key, val ) {
        if(val.value==11){ myval="J";}
        else if(val.value==12){ myval="Q";}
        else if(val.value==13){ myval="K";}
        else if(val.value==14){ myval="A";}
        else{ myval=val.value;}

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit="   &hearts;";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit="   &diams;";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit="   &spades;";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit="   &clubs;";}

        $( '#c2 .l'+key ).html(myval + mysuit);
    });

 $.each(game.cols[3].cards, function( key, val ) {
        if(val.value==11){ myval="J";}
        else if(val.value==12){ myval="Q";}
        else if(val.value==13){ myval="K";}
        else if(val.value==14){ myval="A";}
        else{ myval=val.value;}

        n=h.localeCompare(val.suit);
        if(n==0){ mysuit="   &hearts;";}

        n=d.localeCompare(val.suit);
        if(n==0){ mysuit="   &diams;";}

        n=s.localeCompare(val.suit);
        if(n==0){ mysuit="   &spades;";}

        n=c.localeCompare(val.suit);
        if(n==0){ mysuit="   &clubs;";}

        $( '#c3 .l'+key ).html(myval + mysuit);
    });
}

// Calls ApplicationController.gameGet()
$.getJSON("http://localhost:8080/game", function( data ) {
display(data);
game = data;
});


$("#dealButton").click(function(){
$.ajax({
  type: "POST",
  url: "/dealGame",
  data: JSON.stringify(game),
  success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
        game = data;
        display(data);},
  contentType:"application/json; charset=utf-8",
  dataType:"json",
});
});


function removeCard(colNumber){
$.ajax({
type: "POST",
url: "/removeCard/"+colNumber,
data: JSON.stringify(game),
success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
    game = data;


    if(data.error) {
        errorPopup();
    }

    display(data);},
contentType:"application/json; charset=utf-8",
dataType:"json",
});

}


$("#Remove1").click(function(){
    removeCard(0);
});
$("#Remove2").click(function(){
    removeCard(1);
});
$("#Remove3").click(function(){
    removeCard(2);
});
$("#Remove4").click(function(){
    removeCard(3);
});


$("#moveButton").click(function(){
var colFrom = $("#from_col").val();
var colTo = $("#to_col").val();
$.ajax({
  type: "POST",
  url: "/moveCard/"+colFrom+"/"+colTo,
  data: JSON.stringify(game),
  success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
        game = data;

        if(data.error) {
            errorPopup();
        }

        display(data);},
  contentType:"application/json; charset=utf-8",
  dataType:"json",
});
});


function errorPopup(){
   alert("Oops! Looks like you can't do that. Please check the rules and try again.");
}

    });
});


</script>



</body>
</html>